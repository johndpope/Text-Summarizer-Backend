module.exports=function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=7)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=f(i),r=f(a(36)),o=a(35),n=f(a(34)),u=f(a(19)),l=a(1),d=f(a(3)),c=f(a(4));function f(t){return t&&t.__esModule?t:{default:t}}const p=new i.Schema({email:{type:String,unique:!0,trim:!0,validate:{validator:t=>r.default.isEmail(t),message:"{VALUE} is not a valid email!"}},firstName:{type:String,trim:!0},lastName:{type:String,trim:!0},userName:{type:String,required:[!0,"User name is required"],trim:!0,unique:!0},photo:{type:String,trim:!0},password:{type:String,trim:!0,minlength:[6,"Password need to be longer"]},twitter:{id:String,fullName:String,screenName:String},favourites:{articles:[{type:i.Schema.Types.ObjectId,ref:"Article"}]},toRead:{articles:[{type:i.Schema.Types.ObjectId,ref:"Article"}]},followings:[{type:i.Schema.Types.ObjectId,ref:"User"}],followers:[{type:i.Schema.Types.ObjectId,ref:"User"}]},{timestamps:!0});p.plugin(u.default,{message:"{VALUE} already taken!"}),p.pre("save",function(t){return this.isModified("password")&&(this.password=this._hashPassword(this.password)),t()}),p.methods={_hashPassword:t=>(0,o.hashSync)(t),authenticateUser(t){return(0,o.compareSync)(t,this.password)},createToken(){return n.default.sign({_id:this._id},d.default.JWT_SECRET)},toAuthJSON(){return{_id:this._id,userName:this.userName,photo:this.photo,twitter:this.twitter,token:`JWT ${this.createToken()}`,favourites:this.favourites,toRead:this.toRead,followings:this.followings,followers:this.followers,photo:this.photo}},toJSON(){return{_id:this._id,userName:this.userName,firstName:this.firstName,lastName:this.lastName,favourites:this.favourites,toRead:this.toRead,followings:this.followings,followers:this.followers,photo:this.photo}},savePhoto(t){l.minioClient.putObject("mybucket",t.originalname,t.buffer,"application/octet-stream",function(t,e){if(t)return console.log(t);console.log("File uploaded successfully.")}),this.photo=t.originalname,this.save()},_favourites:{async articles(t){return this.favourites.articles.indexOf(t)>=0?(this.favourites.articles.remove(t),await c.default.decFavourite(t)):(this.favourites.articles.push(t),await c.default.incFavourite(t)),this.save()},isArticleIsFavourite(t){return this.favourites.articles.indexOf(t)>=0}},_toRead:{async articles(t){return this.toRead.articles.indexOf(t)>=0?(this.toRead.articles.remove(t),await c.default.removeToRead(t)):(this.toRead.articles.push(t),await c.default.addToRead(t)),this.save()}},_followings:{async add(t){this.followings.indexOf(t)>=0?(console.log("removing user from following list"),this.followings.remove(t)):(console.log("adding new user to following list"),this.followings.push(t)),this.save()}},_followers:{async add(t){this.followers.indexOf(t)>=0?(console.log("removing user from followers list"),this.followers.remove(t)):(console.log("adding new user to followers list"),this.followers.push(t)),this.save()}}},p.statics={async checkFollower(t,e){(await this.findById(t))._followers.add(e)}},e.default=s.default.model("User",p)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minioClient=void 0;var i=a(20);e.minioClient=new i.Client({endPoint:"play.minio.io",port:9e3,secure:!0,accessKey:"Q3AM3UQ867SPQQA43P2F",secretKey:"zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG"})},function(t,e){t.exports=require("mongoose")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={MONGO_URL:"mongodb://admin:admin@ds251518.mlab.com:51518/likerss"},s={PORT:process.env.PORT||3e3,JWT_SECRET:"thisIsASecret"};e.default=Object.assign({},s,i)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=l(i),r=l(a(18)),o=l(a(19)),n=l(a(33)),u=a(1);function l(t){return t&&t.__esModule?t:{default:t}}const d=new i.Schema({title:{type:String,trim:!0,required:[!0,"Title is required"],minlength:[3,"Title need to be longer"],maxlength:[24,"Title need to be shorter"],unique:!0},text:{type:String,trim:!0,required:[!0,"Text is required"],minlength:[10,"Text need to be longer"]},summary:{type:String,trim:!0,minLength:[10,"Summary need to be longer"]},photo:{type:String,trim:!0},slug:{type:String,trim:!0,lowercase:!0},user:{type:i.Schema.Types.ObjectId,ref:"User"},favouriteCount:{type:Number,default:0},toReadFlag:{type:Boolean,default:!1}},{timestamps:!0});d.plugin(o.default,{message:"{VALUE} already taken!"}),d.pre("validate",function(t){this._slugify(),t()}),d.methods={_slugify(){this.slug=(0,r.default)(this.title)},toJSON(){return{_id:this._id,title:this.title,text:this.text,summary:this.summary,createdAt:this.createdAt,user:this.user,favoriteCount:this.favoriteCount,photo:this.photo}},savePhoto(t){u.minioClient.putObject("mybucket",t.originalname,t.buffer,"application/octet-stream",function(t,e){if(t)return console.log(t);console.log("File uploaded successfully.")}),this.photo=t.originalname,this.save()}},d.statics={createArticle(t,e){return this.create(Object.assign({},t,{user:e}))},list({skip:t=0,limit:e=5}={}){return this.find().sort({createdAt:-1}).skip(t).limit(e).populate("user")},summarizeText(t,e,a){console.log("inside summarizeText");const i={pythonPath:"/usr/bin/python3",pythonOptions:["-u"],args:[e,a]},s=new n.default("/Summarization/Engine/predicter.py",i);s.on("message",e=>{console.log(e),t.summary=e,t.save()}),s.end((t,e,a)=>{if(t)throw t;console.log("The exit code was: ",e),console.log("The exit signal was: ",a),console.log("python-shell has finished excuting")})},incFavourite(t){return this.findByIdAndUpdate(t,{$inc:{favouriteCount:1}})},decFavourite(t){return this.findByIdAndUpdate(t,{$inc:{favouriteCount:-1}})},addToRead(t){return this.findByIdAndUpdate(t,{toReadFlag:!0})},removeToRead(t){return this.findByIdAndUpdate(t,{toReadFlag:!1})}},e.default=s.default.model("Article",d)},function(t,e){t.exports=require("passport")},function(t,e){t.exports=require("express")},function(t,e,a){"use strict";var i=u(a(6)),s=u(a(3));a(48);var r=u(a(47)),o=u(a(42)),n=u(a(21));function u(t){return t&&t.__esModule?t:{default:t}}const l=(0,i.default)();l.use((0,n.default)({secret:"this is my secret session"})),(0,r.default)(l),l.get("/",(t,e)=>{e.status(200).send("Hello World!")}),(0,o.default)(l),l.listen(s.default.PORT,t=>{if(t)throw t;console.log(`\n       Server running on port: ${s.default.PORT}\n       ---\n       Running on: production\n       ---\n       Make something great\n       `)}),t.exports=l},,function(t,e){t.exports=require("http-status")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.authJwt=e.authLocal=void 0;var i=u(a(5)),s=u(a(38)),r=a(37),o=u(a(0)),n=u(a(3));function u(t){return t&&t.__esModule?t:{default:t}}const l=new s.default({usernameField:"email"},async(t,e,a)=>{try{const i=await o.default.findOne({email:t});return i&&i.authenticateUser(e)?a(null,i):a(null,!1)}catch(t){return a(t,!1)}}),d={jwtFromRequest:r.ExtractJwt.fromAuthHeaderWithScheme("jwt"),secretOrKey:n.default.JWT_SECRET},c=new r.Strategy(d,async(t,e)=>{try{const a=await o.default.findById(t._id);return e(null,a?a:!1)}catch(t){return e(t,!1)}});i.default.use(l),i.default.use(c);e.authLocal=i.default.authenticate("local",{session:!1}),e.authJwt=i.default.authenticate("jwt",{session:!1})},function(t,e){t.exports=require("multer")},,,,,function(t,e){t.exports=require("joi")},function(t,e){t.exports=require("express-validation")},function(t,e){t.exports=require("slug")},function(t,e){t.exports=require("mongoose-unique-validator")},function(t,e){t.exports=require("minio")},function(t,e){t.exports=require("express-session")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=o(i),r=(o(a(18)),a(1));function o(t){return t&&t.__esModule?t:{default:t}}const n=new i.Schema({title:{type:String,trim:!0,required:[!0,"Collection title is requires"],minlength:[3,"Title need to be longer"],maxlength:[24,"Title need to be shorter"],unique:!0},description:{type:String,trim:!0,required:!1,minlength:[5,"Description need to be longer"],maxlength:[48,"Description need to be shorter"]},photo:{type:String,trim:!0},user:{type:i.Schema.Types.ObjectId,ref:"User"},articles:[{type:i.Schema.Types.ObjectId,ref:"Article"}]},{timestamps:!0});n.methods={toJSON(){return{_id:this._id,title:this.title,description:this.description,photo:this.photo,user:this.user,articles:this.articles,createdAt:this.createdAt}},savePhoto(t){r.minioClient.putObject("mybucket",t.originalname,t.buffer,"application/octet-stream",function(t,e){if(t)return console.log(t);console.log("File uploaded successfully.")}),this.photo=t.originalname,this.save()},_articles:{add(t){this.articles.indexOf(t)>=0?(console.log("removing article from collection"),this.articles.remove(t)):(console.log("adding article to collection"),this.articles.push(t)),this.save()}}},n.statics={createCollection(t,e){return this.create(Object.assign({},t,{user:e}))}},e.default=s.default.model("Collection",n)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCollection=async function(t,e){try{const a=await s.default.createCollection(t.body,t.user._id);return t.file&&await a.savePhoto(t.file),e.status(i.default.CREATED).json(a)}catch(t){e.status(i.default.BAD_REQUEST).json(t)}},e.updateCollection=async function(t,e){try{const a=await s.default.findById(t.params.id);return a.user.equals(t.user._id)?(Object.keys(t.body).forEach(e=>{a[e]=t.body[e]}),t.file&&await a.savePhoto(t.file),e.status(i.default.OK).json(await a.save())):e.sendStatus(i.default.UNAUTHORIZED)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.getCollectionById=async function(t,e,a){try{const u=await s.default.findById(t.params.id).populate("articles").populate("user");if(!u.photo)return e.status(i.default.OK).json(u),a();var o=0,n="";r.minioClient.getObject("mybucket",u.photo,(t,s)=>{if(t)return console.log(t);s.on("data",t=>{o+=t.length,n+=t}),s.on("end",()=>(console.log("End. Total size = "+o),u.photo=n,e.status(i.default.OK).json(u),a()))})}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.addArticleToCollection=async function(t,e){try{const a=await s.default.findById(t.params.cid);return console.log(a),await a._articles.add(t.params.aid),e.sendStatus(i.default.OK)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.deleteCollection=async function(t,e){try{const a=await s.default.findById(t.params.id);return a.user.equals(t.user._id)?(await a.remove(),e.sendStatus(i.default.OK)):e.sendStatus(i.default.UNAUTHORIZED)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.getUserCollections=async function(t,e){try{const a=await s.default.find({user:t.params.uid}).populate("articles");return e.status(i.default.OK).json(a)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}};var i=o(a(9)),s=o(a(22)),r=(o(a(0)),a(1));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(a(16));e.default={createCollection:{body:{title:i.default.string().min(3).max(24).required(),description:i.default.string().min(10).max(48)}},updateCollection:{body:{title:i.default.string().min(5).max(24),description:i.default.string().min(10).max(48)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),s=l(a(17)),r=l(a(11)),o=l(a(24)),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(23)),u=a(10);function l(t){return t&&t.__esModule?t:{default:t}}const d=new i.Router;d.post("/",u.authJwt,(0,r.default)({storage:r.default.memoryStorage()}).single("photo"),(0,s.default)(o.default.createCollection),n.createCollection),d.patch("/:id",u.authJwt,(0,r.default)({storage:r.default.memoryStorage()}).single("photo"),(0,s.default)(o.default.updateCollection),n.updateCollection),d.get("/:id",u.authJwt,n.getCollectionById),d.post("/:cid/:aid",u.authJwt,n.addArticleToCollection),d.delete("/:id",u.authJwt,n.deleteCollection),d.get("/user/:uid",u.authJwt,n.getUserCollections),e.default=d},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createArticle=async function(t,e){console.log("inside the controller");try{const a=await o.default.createArticle(t.body,t.user._id);return await o.default.summarizeText(a,t.body.title,t.body.text),t.file&&await a.savePhoto(t.file),e.status(i.default.CREATED).json(a)}catch(t){e.status(i.default.BAD_REQUEST).json(t)}},e.getArticleById=async function(t,e){try{const u=await Promise.all([r.default.findById(t.user._id),o.default.findById(t.params.id).populate("user")]),l=u[0]._favourites.isArticleIsFavourite(t.params.id),d=u[1];if(t.file){var a=0,n="";s.minioClient.getObject("mybucket",d.photo,(t,s)=>{if(t)return console.log(t);s.on("data",t=>{a+=t.length,n+=t}),s.on("end",()=>(console.log("End. Total size = "+a),d.photo=n,e.status(i.default.OK).json(Object.assign({},d.toJSON(),{favourite:l}))))})}return e.status(i.default.OK).json(Object.assign({},d.toJSON(),{favourite:l}))}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.getArticlesList=async function(t,e){try{const a=await Promise.all([r.default.findById(t.user._id),o.default.list({limit:parseInt(t.query.limit,0),skip:parseInt(t.query.skip,0)})]),s=a[1].reduce((t,e)=>{const i=a[0]._favourites.isArticleIsFavourite(e._id);return t.push(Object.assign({},e.toJSON(),{favourite:i})),t},[]);return e.status(i.default.OK).json(s)}catch(t){e.status(i.default.BAD_REQUEST).json(t)}},e.updateArticle=async function(t,e){try{const a=await o.default.findById(t.params.id);return a.user.equals(t.user._id)?(Object.keys(t.body).forEach(e=>{a[e]=t.body[e]}),t.file?(await a.savePhoto(t.file),e.status(i.default.OK).json(a)):e.status(i.default.OK).json(await a.save())):e.sendStatus(i.default.UNAUTHORIZED)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.deleteArticle=async function(t,e){try{const a=await o.default.findById(t.params.id);return a.user.equals(t.user._id)?(await a.remove(),e.sendStatus(i.default.OK)):e.sendStatus(i.default.UNAUTHORIZED)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.favouriteArticle=async function(t,e){try{const a=await r.default.findById(t.user._id);return await a._favourites.articles(t.params.id),e.sendStatus(i.default.OK)}catch(t){e.status(i.default.BAD_REQUEST).json(t)}},e.toReadArticle=async function(t,e){try{const a=await r.default.findById(t.user._id);return await a._toRead.articles(t.params.id),e.sendStatus(i.default.OK)}catch(t){e.status(i.default.BAD_REQUEST).json(t)}};var i=n(a(9)),s=a(1),r=n(a(0)),o=n(a(4));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(a(16));e.default={createArticle:{body:{title:i.default.string().min(3).max(24).required(),text:i.default.string().min(10).required()}},updateArticle:{body:{title:i.default.string().min(3).max(24),text:i.default.string().min(10)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),s=l(a(17)),r=l(a(11)),o=l(a(27)),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(26)),u=a(10);function l(t){return t&&t.__esModule?t:{default:t}}const d=new i.Router;d.post("/",u.authJwt,(0,r.default)({storage:r.default.memoryStorage()}).single("photo"),(0,s.default)(o.default.createArticle),n.createArticle),d.get("/:id",u.authJwt,n.getArticleById),d.get("/",u.authJwt,n.getArticlesList),d.patch("/:id",u.authJwt,(0,r.default)({storage:r.default.memoryStorage()}).single("photo"),(0,s.default)(o.default.updateArticle),n.updateArticle),d.delete("/:id",u.authJwt,n.deleteArticle),d.post("/:id/favourite",u.authJwt,n.favouriteArticle),d.post("/:id/toread",u.authJwt,n.toReadArticle),e.default=d},function(t,e){t.exports=require("fs")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.signup=async function(t,e){try{const a=await s.default.create(t.body);return e.status(i.default.CREATED).json(a.toAuthJSON())}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.twitterSignup=async function(t,e){try{!function(t,e){s.default.findOne({"twitter.id":t.id},(a,r)=>{if(r)return e.status(i.default.OK).json(r.toAuthJSON());{const a={id:t.id,fullName:t.displayName,screenName:t.username};var o=new s.default({userName:a.screenName,photo:t.photos[0].value,twitter:a});o.save((t,a)=>t?e.status(i.default.BAD_REQUEST):e.status(i.default.OK).json(a.toAuthJSON()))}})}(t.user,e)}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.login=function(t,e,a){try{const n=t.user;if(!n.photo)return e.status(i.default.OK).json(n.toAuthJSON()),a();var s=0,r="";o.minioClient.getObject("mybucket",n.photo,(t,o)=>{if(t)return console.log(t);o.on("data",t=>{s+=t.length,r+=t}),o.on("end",()=>(console.log("End. Total size = "+s),n.photo=r,e.status(i.default.OK).json(n),a()))})}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.follow=async function(t,e){try{const a=await s.default.findById(t.user._id);return t.user._id.equals(t.params.id)?e.sendStatus(i.default.BAD_REQUEST):(await a._followings.add(t.params.id),await s.default.checkFollower(t.params.id,t.user.id),e.sendStatus(i.default.OK))}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.update=async function(t,e){try{const a=await s.default.findById(t.user._id);return Object.keys(t.body).forEach(e=>{a[e]=t.body[e]}),t.file?(await a.savePhoto(t.file),e.status(i.default.OK).json(a)):e.status(i.default.OK).json(await a.save())}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.findUserById=async function(t,e){try{const a=await s.default.findById(t.params.id);return a?e.status(i.default.OK).json(a.toJSON()):e.status(i.default.BAD_REQUEST).json({message:"User not found!"})}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.getFavouritesList=async function(t,e){try{s.default.findById(t.params.id,(t,a)=>{r.default.find({_id:{$in:a.favourites.articles}},(t,a)=>e.status(i.default.OK).json(a))})}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}},e.getToreadsList=function(t,e,a){try{s.default.findById(t.params.id,(t,a)=>{r.default.find({_id:{$in:a.toRead.articles}},(t,a)=>e.status(i.default.OK).json(a))})}catch(t){return e.status(i.default.BAD_REQUEST).json(t)}};var i=n(a(9)),s=(n(a(29)),n(a(0))),r=n(a(4)),o=a(1);function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=require("passport-twitter")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.authTwitterCallback=e.authTwitter=void 0;var i=r(a(5)),s=a(31);r(a(0)),r(a(3));function r(t){return t&&t.__esModule?t:{default:t}}const o=new s.Strategy({consumerKey:"EGLoBrQWNNtCDLYQKh6pupRO1",consumerSecret:"9FNzG4LlhCOhnNOf9VGS2SHQXAILjiLXTWfOrr9MT7W6nV05ww",callbackURL:"http://127.0.0.1:3000/api/v1/users/auth/twitter/callback"},async(t,e,a,i)=>{try{return i(null,a)}catch(t){return i(t,!1)}});i.default.use(o);e.authTwitter=i.default.authenticate("twitter",{session:!1}),e.authTwitterCallback=i.default.authenticate("twitter",{session:!1,failureRedirect:"/"})},function(t,e){t.exports=require("python-shell")},function(t,e){t.exports=require("jsonwebtoken")},function(t,e){t.exports=require("bcrypt-nodejs")},function(t,e){t.exports=require("validator")},function(t,e){t.exports=require("passport-jwt")},function(t,e){t.exports=require("passport-local")},function(t,e){t.exports=require("passport-facebook")},function(t,e){t.exports=require("path")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),s=(u(a(40)),u(a(11))),r=(u(a(20)),u(a(5)),u(a(39)),a(10)),o=a(32),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(30));a(1);function u(t){return t&&t.__esModule?t:{default:t}}const l=new i.Router;l.get("/:id",n.findUserById),l.post("/signup",n.signup),l.post("/login",r.authLocal,n.login),l.post("/:id/follow",r.authJwt,n.follow),l.patch("/update",r.authJwt,(0,s.default)({storage:s.default.memoryStorage()}).single("photo"),n.update),l.get("/login/twitter",o.authTwitter),l.get("/auth/twitter/callback",o.authTwitterCallback,n.twitterSignup),l.get("/:id/favourites",r.authJwt,n.getFavouritesList),l.get("/:id/toread",r.authJwt,n.getToreadsList),e.default=l},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(41)),s=o(a(28)),r=o(a(25));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(t=>{t.use("/api/v1/users",i.default),t.use("/api/v1/articles",s.default),t.use("/api/v1/collections",r.default)})},function(t,e){t.exports=require("helmet")},function(t,e){t.exports=require("compression")},function(t,e){t.exports=require("body-parser")},function(t,e){t.exports=require("morgan")},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(a(46)),s=u(a(45)),r=u(a(44)),o=u(a(43)),n=u(a(5));function u(t){return t&&t.__esModule?t:{default:t}}e.default=(t=>{t.use((0,r.default)()),t.use((0,o.default)()),t.use(s.default.json()),t.use(s.default.urlencoded({extended:!0})),t.use(n.default.initialize()),t.use((0,i.default)("combined"))})},function(t,e,a){"use strict";var i=r(a(2)),s=r(a(3));function r(t){return t&&t.__esModule?t:{default:t}}i.default.Promise=global.Promise;try{i.default.connect(s.default.MONGO_URL)}catch(t){i.default.createConnection(s.default.MONGO_URL)}i.default.connection.once("open",()=>console.log("MongodDB Running")).on("error",t=>{throw t})}]);